{"version":3,"file":"js/app.1f503856.js","mappings":"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","sources":["webpack://vs/./src/App.vue","webpack://vs/./src/lib/jsonpFetch.js","webpack://vs/./src/bus.js","webpack://vs/./src/lib/buildGraph.js","webpack://vs/./src/Progress.js","webpack://vs/./src/appState.js","webpack://vs/./src/lib/measureText.js","webpack://vs/./src/lib/layout/Vector.js","webpack://vs/./src/lib/layout/flock.js","webpack://vs/./src/lib/layout/boidLayout.js","webpack://vs/./src/lib/createInterpolateLayout.js","webpack://vs/./src/lib/layout/getDelaunayGraph.js","webpack://vs/./src/lib/layout/makeSpanningTree.js","webpack://vs/./src/lib/layout/removeOverlaps.js","webpack://vs/./src/lib/layout/Rect.js","webpack://vs/./src/lib/aggregateLayout.js","webpack://vs/./src/lib/renderer/linkAnimator.js","webpack://vs/./src/lib/buildLinkIndex.js","webpack://vs/./src/lib/createRenderer.js","webpack://vs/./src/components/About.vue","webpack://vs/./src/components/About.vue?5f92","webpack://vs/./src/components/QueryInput.vue","webpack://vs/./src/components/QueryInput.vue?2d2a","webpack://vs/./src/App.vue?7ccd","webpack://vs/./src/main.js","webpack://vs/webpack/bootstrap","webpack://vs/webpack/runtime/chunk loaded","webpack://vs/webpack/runtime/compat get default export","webpack://vs/webpack/runtime/define property getters","webpack://vs/webpack/runtime/global","webpack://vs/webpack/runtime/hasOwnProperty shorthand","webpack://vs/webpack/runtime/jsonp chunk loading","webpack://vs/webpack/startup"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <form v-on:submit.prevent=\"onSubmit\" class='search-box'>\n      <span @click.prevent='forwardFocus'>Graph for</span>\n      <query-input class='query-input' placeholder='Enter query' v-model='appState.query' :pattern='appState.pattern' ref='queryInput'></query-input>\n      <a type='submit' class='search-submit' href='#' @click.prevent='onSubmit' v-if='appState.query'>Go</a>\n    </form>\n    <div class='help' v-if='!isLoading'>\n      The graph was made from Google's auto-complete.\n      <a href='#' @click.prevent='aboutVisible = true' class='highlight'>Learn more.</a>\n    </div>\n    <div class='help' v-if='isLoading'>{{appState.progress.message}}</div>\n    <div class='about-line'>\n      <a class='about-link' href='#' @click.prevent='aboutVisible = true'>about</a>\n      <a class='bold' href='http://github.com/anvaka/vs'>source code</a>\n    </div>\n\n    <about v-if='aboutVisible' @close='aboutVisible = false'></about>\n\n    <div class='welcome' v-if='!appState.hasGraph'>\n      <h3>Welcome!</h3>\n      <p>This website renders graph of Google's auto-complete.\n      <a class='highlight' href='#' @click.prevent='aboutVisible = true'>Click here</a> to learn more, or <a class='highlight' href='?query=iphone'>try demo</a>.\n         </p>\n    </div>\n\n    <div class='tooltip' ref='tooltip'>{{tooltip.text}}</div>\n\n  </div>\n</template>\n\n<script>\nimport {getAppState, performSearch, resolveQueryFromLink} from './appState.js';\nimport createRenderer from './lib/createRenderer';\nimport About from './components/About';\nimport QueryInput from './components/QueryInput';\nimport bus from './bus'\n\nconst appState = getAppState();\n\nexport default {\n  name: 'App',\n  data() {\n    return {\n      aboutVisible: false,\n      appState: getAppState(),\n      tooltip: {\n        text: '',\n        x: '',\n        y: ''\n      }\n    };\n  },\n  components: {\n    About,\n    QueryInput\n  },\n  computed: {\n    isLoading() {\n      return appState.progress.working;\n    },\n  },\n  methods: {\n    forwardFocus() {\n      this.$refs.queryInput.focus();\n    },\n    onSubmit() {\n      if (!appState.query) return;\n\n      performSearch(appState.query)\n      this.renderer.render(appState.graph);\n      const el = document.querySelector( ':focus' );\n      if(el) el.blur();\n    },\n\n    showTooltip(event) {\n      const el = this.$refs.tooltip;\n      if (event.isVisible) {\n        el.classList.add('visible');\n        el.innerText = resolveQueryFromLink(event.from, event.to);\n        el.style.left = (event.x + 16) + 'px';\n        el.style.top = (event.y - 16) + 'px';\n      } else {\n        el.classList.remove('visible');\n      }\n    },\n\n    showDetails(link) {\n      const query = resolveQueryFromLink(link.fromId, link.toId);\n      window.open('https://google.com/search?q=' + encodeURIComponent(query), '_blank');\n    }\n  },\n  mounted() {\n    this.renderer = createRenderer(appState.progress);\n    bus.on('show-tooltip', this.showTooltip, this);\n    bus.on('show-details', this.showDetails, this);\n    if (appState.graph) {\n      this.renderer.render(appState.graph);\n    }\n  },\n  beforeUnmount() {\n    bus.off('show-tooltip', this.showTooltip, this);\n    bus.off('show-details', this.showDetails, this);\n  }\n\n}\n</script>\n\n<style lang='stylus'>\n@import('./vars.styl');\n\n#app {\n  position: relative;\n  margin: 8px 14px;\n  width: 392px;\n  background: background-color;\n}\n\n.query-input {\n  flex: 1;\n  margin-left: 8px;\n}\n\n.highlight {\n  color: highlight-color;\n}\n\nrect, path, text {\n  transition: stroke 200ms, fill 200ms;\n}\n\n.hovered rect,\npath.hovered {\n  stroke: highlight-color;\n}\n\n.hovered rect {\n  stroke: highlight-color;\n}\n\n.help {\n  font-size: 12px;\n  margin-top: 8px;\n  a {\n    background: background-color;\n  }\n}\na {\n  &:hover, &:focus {\n    color: highlight-color;\n    border-bottom: 1px dashed;  \n  }\n}\n.search-submit {\n  align-items: center;\n  text-decoration: none;\n  display: flex;\n  flex-shrink: 0;\n  width: 48px;\n  justify-content: center;\n  outline: none;\n  &:hover, &:focus {\n    color: background-color;\n    background: highlight-color;\n  }\n}\n.special {\n  color: highlight-color;\n  font-family: monospace;\n}\na {\n  text-decoration: none;\n}\n\n.about-line {\n  position: fixed;\n  right: 0;\n  top: 8px;\n  padding: 0px 0;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n\n  a {\n    text-align: right;\n    background: background-color;\n    font-size: 12px;\n    padding: 0 8px;\n    line-height: 24px;\n    height: 24px;\n    color: secondary-color;\n    border-bottom: 1px solid transparent;\n    &:hover, &:focus {\n      color: highlight-color;\n      border-bottom: 1px dashed;\n    }\n  }\n}\n\n.tooltip {\n  box-shadow: 0 2px 4px rgba(0,0,0,0.2), 0 -1px 0px rgba(0,0,0,0.02);\n  position: fixed;\n  background: background-color;\n  padding: 8px;\n  border: 1px solid border-color;\n  pointer-events: none;\n  opacity: 0;\n  transition-duration: 300ms;\n  transition-property: opacity;\n}\n.tooltip.visible {\n  opacity: 1;\n}\n\n.search-box {\n  position: relative;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.2), 0 -1px 0px rgba(0,0,0,0.02);\n  height: 48px;\n  display: flex;\n  font-size: 16px;\n  padding: 0 0 0 8px;\n  cursor: text;\n\n  a {\n    color: #B2B2B2\n    cursor: pointer;\n  }\n  span {\n    display: flex;\n    align-items: center;\n    flex-shrink: 0;\n  }\n\n}\n\n\n@media (max-width: 800px) {\n  #app {\n    width: 100%;\n    margin: 0;\n  }\n  .welcome {\n    padding: 16px;\n  }\n  .help {\n    padding: 0 8px;\n  }\n  .about-line {\n    bottom: 0;\n    top: initial;\n    right: 0;\n  }\n}\n\n@media (max-height: 550px) {\n  .search-box {\n    height: 32px;\n    input.search-input {  \n      font-size: 16px;\n    }\n\n  }\n  .help {\n    margin-top: 4px;\n  }\n}\n</style>\n","let myIndex = 0;\n\n/**\n * Performs JSONP request to a given url\n */\nexport default function jsonpFetch(url) {\n  let isCancelled, actualResolve;\n  let loadScript = null;\n  const name = 'callback' + (myIndex++);\n  window[name] = downloaded;\n  let cancelable = new Promise(download);\n  cancelable.cancel = cancel;\n\n\n  return cancelable;\n\n  function download(resolve, reject) {\n    actualResolve = resolve;\n\n    loadScript = document.createElement('script');\n    loadScript.src = `${url}&callback=${name}`;\n    loadScript.onerror = reject;\n    document.head.appendChild(loadScript);\n  }\n\n  function cancel() {\n    isCancelled = true;\n  }\n\n  function downloaded(e) {\n    if (isCancelled) {\n      dispose();\n      return;\n    }\n\n    actualResolve(e);\n    dispose();\n  }\n\n  function dispose() {\n    if (loadScript) {\n      document.head.removeChild(loadScript);\n      loadScript = null;\n    }\n    delete window[name];\n  }\n}","const bus = require('ngraph.events')({});\n\nexport default bus;\n","import jsonpFetch from \"./jsonpFetch\";\nimport bus from '../bus';\n\n/**\n * This function builds a graph from google's auto-suggestions.\n */\nexport default function buildGraph(entryWord, pattern, MAX_DEPTH, progress) {\n  entryWord = entryWord && entryWord.trim();\n  if (!entryWord) return;\n\n  entryWord = entryWord.toLocaleLowerCase();\n\n  const insertPosition = pattern.indexOf('...');\n  if (insertPosition < 0) {\n    throw new Error('Query pattern is missing \"...\"');\n  }\n  const queryPosition = pattern.indexOf('[query]');\n  if (queryPosition < 0) {\n    throw new Error('Query pattern is missing \"[query]\" keyword');\n  }\n\n  if (insertPosition < queryPosition) {\n    throw new Error('[query] should come before ...');\n  }\n\n  let cancelled = false;\n  let pendingResponse;\n  let graph = require('ngraph.graph')();\n  graph.maxDepth = MAX_DEPTH;\n  let queue = [];\n  let requestDelay = 300 + Math.random() * 100;\n  progress.startDownload();\n\n  startQueryConstruction();\n\n  return {\n    dispose,\n    graph\n  }\n\n  function dispose() {\n    cancelled = true;\n    if (pendingResponse) {\n      pendingResponse.cancel();\n      pendingResponse = null;\n    }\n  }\n\n  function startQueryConstruction() {\n    graph.addNode(entryWord, {depth: 0});\n    fetchNext(entryWord);\n  }\n\n  function loadSiblings(parent, results) {\n    let q = fullQuery(parent).toLocaleLowerCase();\n    var parentNode = graph.getNode(parent);\n\n    if (!parentNode) {\n      throw new Error('Parent is missing for ' + parent);\n    }\n\n    results.filter(x => x.toLocaleLowerCase().indexOf(q) === 0)\n      .map(x => x.substring(q.length))\n      .forEach(other => {\n        const hasOtherNode = graph.hasNode(other);\n        const hasOtherLink = graph.getLink(other, parent) || graph.getLink(parent, other);\n        if (hasOtherNode) {\n          if (!hasOtherLink) {\n            graph.addLink(parent, other);\n          }\n          return;\n        }\n\n        let depth = parentNode.data.depth + 1;\n        graph.addNode(other, {depth});\n        graph.addLink(parent, other);\n        if (depth < MAX_DEPTH) queue.push(other);\n      });\n\n    setTimeout(loadNext, requestDelay);\n  }\n\n  function loadNext() {\n    if (cancelled) return;\n    if (queue.length === 0) {\n      bus.fire('graph-ready', graph);\n      return;\n    }\n\n    let nextWord = queue.shift();\n    fetchNext(nextWord);\n    progress.updateLayout(queue.length, nextWord);\n  }\n\n  function fetchNext(query) {\n    pendingResponse = getResponse(fullQuery(query));\n    pendingResponse\n      .then(res => onPendingReady(res, query))\n      .catch((msg) => {\n        const err = 'Failed to download ' + query + '; Message: ' + msg;\n        console.error(err);\n        progress.downloadError(err)\n        loadNext();\n      });\n  }\n\n  function onPendingReady(res, query) {\n    if (res.length >= 2) {\n      loadSiblings(query, res[1]);\n    } else {\n      console.error(res);\n      throw new Error('Unexpected response');\n    }\n  }\n\n  function fullQuery(query) {\n    return pattern.replace('[query]', query).replace('...', '');\n  }\n\n  function getResponse(query) {\n    return jsonpFetch('https://suggestqueries.google.com/complete/search?client=firefox&q=' + encodeURIComponent(query));\n  }\n}","/**\n * Tracks progress of the graph construction and layout\n */\nexport default class Progress {\n  constructor() {\n    this.message = '';\n    this.phase = 'none';\n    this.download = {\n      errors: [],\n      remaining: 0,\n      currentWord: '',\n    };\n    this.layout = {\n      iteration: 0\n    };\n    this.working = true\n  }\n\n  startDownload() {\n    this.phase = 'download';\n  }\n\n  startLayout() {\n    this.message = 'Finished download. Constructing layout...';\n    this.phase = 'layout';\n  }\n\n  setLayoutCompletion(layoutCompletion) {\n    if (this.phase === 'layout') {\n      this.message = `Finished download. Constructing layout ${layoutCompletion}%...`;\n    }\n  }\n\n  updateLayout(remaining, nextWord) {\n    this.download.currentWord = nextWord;\n    this.download.remaining = remaining;\n    this.message = `Remaining: ${remaining}. Downloading ${nextWord}`;\n  }\n\n  done() {\n    this.working = false;\n  }\n\n  downloadError(message) {\n    this.download.errors.push(message);\n  }\n\n  reset() {\n    this.phase = 'none',\n    this.download.errors = [];\n    this.download.remaining = 0;\n    this.download.currentWord = '';\n    this.layout.iteration = 0;\n    this.message = '';\n    this.working = true;\n  }\n}\n","import buildGraph from './lib/buildGraph';\nimport Progress from './Progress';\nimport {reactive} from 'vue';\n\nconst queryState = require('query-state');\n\nconst qs = queryState({\n  query: ''\n}, {\n  useSearch: true\n});\n\nlet lastBuilder;\nconst appStateFromQuery = qs.get();\nconst appState = reactive({\n  hasGraph: false,\n  maxDepth: appStateFromQuery.maxDepth || 2,\n  progress: new Progress(),\n  graph: null,\n  query: appStateFromQuery.query,\n  pattern: appStateFromQuery.pattern || '[query] vs ...'\n});\n\nif (appState.query) {\n  performSearch(appState.query);\n}\n\nqs.onChange(updateAppState);\n\nfunction updateAppState(newState) {\n  appState.query = newState.query;\n}\n\nexport function performSearch(queryString) {\n  debugger;\n  appState.hasGraph = true;\n  appState.progress.reset();\n\n  qs.set('query', queryString);\n  if (lastBuilder) {\n    lastBuilder.dispose();\n  }\n\n  lastBuilder = buildGraph(queryString, appState.pattern, appState.maxDepth, appState.progress);\n  appState.graph = Object.freeze(lastBuilder.graph);\n  return lastBuilder.graph;\n}\n\nexport function resolveQueryFromLink(from, to) {\n  return appState.pattern.replace('[query]', from).replace('...', to);\n}\n\nexport function getAppState() {\n  return appState;\n}","var svgns = 'http://www.w3.org/2000/svg';\nvar xmlns = 'http://www.w3.org/XML/1998/namespace';\n\n\nexport default function createTextMeasure(svgContainer, options) {\n  options = options || {};\n  if (!('useFastTextMeasure' in options)) {\n    options.useFastTextMeasure = false;\n  }\n\n  var cachedSizes = {};\n  var cachedWords = Object.create(null);\n\n  // TODO: If you need custom language, you might wanna extend this.\n  var abc = 'abcdefghijklmnopqrstuvwxyz';\n  var avgLetterWidthByFontSize = {};\n\n  // Safari doesn't work correctly on font-size smaller than 1 px;\n  var safariGuess = {\n    1: 0.4951923076923077,\n    0.875: 0.43509615384615385,\n    0.833: 0.41346153846153844,\n    0.75: 0.3701923076923077,\n    0.5: 0.24459134615384615,\n  };\n\n  return measure;\n\n  function measure(text, fontSize) {\n    if (fontSize < 1) {\n      // take only first three digits:\n      fontSize = (Math.round(fontSize * 1000)) / 1000;\n    }\n\n    var cacheKey = text + fontSize;\n    var cachedResult = cachedSizes[cacheKey];\n    if (cachedResult) return cachedResult;\n    var result = {};\n\n    cachedSizes[cacheKey] = result;\n\n    var textContainer = window.document.createElementNS(svgns, 'text');\n    // set the font size that is requested.\n    textContainer.setAttributeNS(null, 'font-size', fontSize);\n    // we need this to measure words separators.\n    textContainer.setAttributeNS(xmlns, 'xml:space', 'preserve');\n\n    svgContainer.appendChild(textContainer);\n\n    result.words = text.split(/\\s/).map(toWordWidths);\n    result.spaceWidth = measureSpaceWidth();\n    result.totalWidth = sumUpWordsLengthInPixels(result.words, result.spaceWidth);\n\n    svgContainer.removeChild(textContainer);\n\n    return result;\n\n    function sumUpWordsLengthInPixels(words, spaceWidth) {\n      var width = 0;\n\n      words.forEach(function(word) { width += word.width; });\n      width += (words.length - 1) * spaceWidth;\n\n      return width;\n    }\n\n    function measureSpaceWidth() {\n      var spaceWidthKey = 'space' + fontSize;\n      var spaceWidth = avgLetterWidthByFontSize[spaceWidthKey];\n      if (!spaceWidth) {\n        textContainer.textContent = ' ';\n        spaceWidth = measureTextWidth(textContainer);\n        avgLetterWidthByFontSize[spaceWidthKey] = spaceWidth;\n      }\n\n      return spaceWidth;\n    }\n\n    function toWordWidths(text) {\n      return {\n        text: text,\n        width: measureText(text)\n      };\n    }\n\n    function measureText(text) {\n      return options.useFastTextMeasure ? measureAvgWidth(text) : preciseMeasure(text);\n    }\n\n    function preciseMeasure(text) {\n      var cachedWordsKey = text + fontSize;\n      var size = cachedWords[cachedWordsKey];\n      if (size === undefined) {\n        textContainer.textContent = text;\n        size = measureTextWidth(textContainer);\n        if (size === 0 && text.length > 0) {\n          // safari :(.\n          var avgWidthAtFontSize = safariGuess[fontSize];\n          if (avgWidthAtFontSize === undefined) throw new Error('Font size is not overriden for safari ' + fontSize);\n          size = avgWidthAtFontSize * text.length;\n        }\n        cachedWords[cachedWordsKey] = size;\n      }\n\n      return size;\n    }\n\n    function measureAvgWidth(text) {\n      var avgWidthAtFontSize = avgLetterWidthByFontSize[fontSize];\n      if (!avgWidthAtFontSize) {\n        textContainer.textContent = abc;\n        var abcWidth = measureTextWidth(textContainer);\n        avgWidthAtFontSize = abcWidth/abc.length;\n\n        if (avgWidthAtFontSize === 0) {\n          // safari at small fonts :(. Not super proud of this, but not sure how\n          // to fix this better.\n          avgWidthAtFontSize = safariGuess[fontSize]\n        }\n\n        avgLetterWidthByFontSize[fontSize] = avgWidthAtFontSize;\n      }\n\n      return avgWidthAtFontSize * text.length;\n    }\n  }\n}\n\nfunction measureTextWidth(svgTextElement) {\n  var result = svgTextElement.getBBox();\n  return result.width;\n}","export class Vector {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n  static sub(a, b) {\n    return new Vector(a.x - b.x, a.y - b.y);\n  }\n  static dist(a, b) {\n    let dx = a.x - b.x;\n    let dy = a.y - b.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n  normalize() {\n    let l = Math.sqrt(this.x * this.x + this.y * this.y);\n    if (l === 0)\n      l = 0.0001;\n    this.x /= l;\n    this.y /= l;\n  }\n  mag() {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  }\n  add(other) {\n    this.x += other.x;\n    this.y += other.y;\n  }\n  sub(other) {\n    this.x -= other.x;\n    this.y -= other.y;\n  }\n  div(scalar) {\n    this.x /= scalar;\n    this.y /= scalar;\n  }\n  mult(scalar) {\n    this.x *= scalar;\n    this.y *= scalar;\n  }\n  limit(maxMag) {\n    let mag = this.mag();\n    if (mag > maxMag) {\n      this.x *= maxMag / mag;\n      this.y *= maxMag / mag;\n    }\n  }\n  distanceTo(other) {\n    let dx = this.x - other.x;\n    let dy = this.y - other.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n}","import { Vector } from './Vector';\n\n// https://processing.org/examples/flocking.html\n\nvar random = require('ngraph.random')(45);\n\nexport class Flock {\n  constructor(graph) {\n    this.graph = graph;\n    this.boids = new Map();\n    this.neighbors = [];\n  }\n\n  run() {\n    // this.neighbors.forEach(b => b.run(this.neighbors));\n    let boids = this.boids;\n    boids.forEach((boid, nodeId) => {\n      let neighbors = [];\n      this.graph.forEachLinkedNode(nodeId, function(other) {\n        let otherBoid = boids.get(other.id);\n        if (otherBoid) neighbors.push(otherBoid);\n      })\n      boid.run(neighbors);\n    });\n  }\n\n  addBoid(nodeId, b) {\n    this.boids.set(nodeId, b);\n    this.neighbors.push(b);\n  }\n\n  setDesiredBoidPosition(boidId, pos) {\n    const boid = this.boids.get(boidId);\n    if (!boid) return;\n    boid.setDesiredPosition(pos.x, pos.y);\n  }\n}\n\nexport class Boid {\n  constructor(x, y) {\n    this.acceleration = new Vector(0, 0);\n\n    let angle = random.nextDouble() * 2 * Math.PI;\n    this.velocity = new Vector(Math.cos(angle), Math.sin(angle));\n    this.position = new Vector(x, y);\n    this.desiredPosition = new Vector(0, 0);\n    this.r = 400.0;\n    this.maxspeed = 3;\n    this.maxforce = 0.08;\n  }\n\n  run(boids) {\n    this.flock(boids);\n    this.update();\n  }\n\n  applyForce(force, nCount) {\n    // We could add mass here if we want A = F / M\n    force.div(nCount)\n    this.acceleration.add(force);\n  }\n\n  setDesiredPosition(x, y) {\n    this.desiredPosition.x = x;\n    this.desiredPosition.y = y;\n  }\n\n  // We accumulate a new acceleration each time based on three rules\n  flock(boids) {\n    let sep = this.separate(boids);   // Separation\n    let ali = this.align(boids);      // Alignment\n    let coh = this.cohesion(boids);   // Cohesion\n    // Arbitrarily weight these forces\n    // sep.mult(1.5);\n    // ali.mult(1.0);\n    // coh.mult(1.0);\n    // Add the force vectors to acceleration\n    const mass = boids.length || 1;\n    this.applyForce(sep, mass);\n    this.applyForce(ali, mass);\n    this.applyForce(coh, mass);\n\n    const pull = Vector.sub(this.desiredPosition, this.position);\n    pull.limit(0.091);\n    this.applyForce(pull, mass);\n  }\n\n  // Method to update position\n  update() {\n    // Update velocity\n    this.velocity.add(this.acceleration);\n    // Limit speed\n    this.velocity.limit(this.maxspeed);\n    this.position.add(this.velocity);\n    // Reset acceleration to 0 each cycle\n    this.acceleration.mult(0);\n  }\n\n  // A method that calculates and applies a steering force towards a target\n  // STEER = DESIRED MINUS VELOCITY\n  seek(target) {\n    const desired = Vector.sub(target, this.position);  // A vector pointing from the position to the target\n    // Scale to maximum speed\n    desired.normalize();\n    desired.mult(this.maxspeed);\n \n    // Steering = Desired minus Velocity\n    let steer = Vector.sub(desired, this.velocity);\n    steer.limit(this.maxforce * 1);  // Limit to maximum steering force\n    return steer;\n  }\n\n  // Separation\n  // Method checks for nearby boids and steers away\n  separate(boids) {\n    const desiredseparation = 40.0;\n    const steer = new Vector(0, 0, 0);\n    let count = 0;\n    // For every boid in the system, check if it's too close\n    boids.forEach((other) => {\n      let d = this.position.distanceTo(other.position);\n      // If the distance is greater than 0 and less than an arbitrary amount (0 when you are yourself)\n      if ((d > 0) && (d < desiredseparation)) {\n        // Calculate vector pointing away from neighbor\n        let diff = Vector.sub(this.position, other.position);\n        diff.normalize();\n        diff.div(d);        // Weight by distance\n        steer.add(diff);\n        count++;            // Keep track of how many\n      }\n    });\n\n    // Average -- divide by how many\n    if (count > 0) {\n      steer.div(count);\n    }\n\n    // As long as the vector is greater than 0\n    if (steer.mag() > 0) {\n      // Implement Reynolds: Steering = Desired - Velocity\n      steer.normalize();\n      steer.mult(this.maxspeed);\n      steer.sub(this.velocity);\n      steer.limit(this.maxforce);\n    }\n\n    return steer;\n  }\n\n  // Alignment\n  // For every nearby boid in the system, calculate the average velocity\n  align(boids) {\n    const neighbordist = 300;\n    const sum = new Vector(0, 0);\n    let count = 0;\n    boids.forEach(other => {\n      let d = Vector.dist(this.position, other.position);\n      if ((d > 0) && (d < neighbordist)) {\n        sum.add(other.velocity);\n        count++;\n      }\n    });\n\n    if (count > 0) {\n      sum.div(count);\n      // Implement Reynolds: Steering = Desired - Velocity\n      sum.normalize();\n      sum.mult(this.maxspeed);\n      let steer = Vector.sub(sum, this.velocity);\n      steer.limit(this.maxforce);\n      return steer;\n    } \n    else {\n      return new Vector(0, 0);\n    }\n  }\n\n  // Cohesion\n  // For the average position (i.e. center) of all nearby boids, calculate steering vector towards that position\n  cohesion(boids) {\n    const neighbordist = 300;\n    let sum = new Vector(0, 0);   // Start with empty vector to accumulate all positions\n    let count = 0;\n    boids.forEach(other => {\n      let d = Vector.dist(this.position, other.position);\n      if ((d > 0) && (d < neighbordist)) {\n        sum.add(other.position); // Add position\n        count++;\n      }\n    })\n\n    if (count > 0) {\n      sum.div(count);\n      return this.seek(sum);  // Steer towards the position\n    } \n    else {\n      return new Vector(0, 0);\n    }\n  }\n}","import {Flock, Boid} from './flock';\nlet createRandom = require('ngraph.random');\n\nexport default function createFakeLayout(graph) {\n  let nodes = new Map();\n  let random = createRandom(42);\n  const flock = new Flock(graph);\n  \n  return {\n    addNode,\n    getNodePosition,\n    setDesiredNodePosition,\n    step\n  };\n\n  function addNode(nodeId) {\n    const pos = {\n      x: (random.nextDouble() - 0.5) * 1000,\n      y: (random.nextDouble() - 0.5) * 1000\n    }\n    const boid = new Boid(pos.x, pos.y);\n    flock.addBoid(nodeId, boid);\n    nodes.set(nodeId, boid);\n    return boid;\n  }\n\n  function getNodePosition(nodeId) {\n    let pos = nodes.get(nodeId)\n    if (!pos) {\n      pos = addNode(nodeId);\n    } \n    return pos.position;\n  }\n\n  function step() {\n    flock.run();\n  }\n\n  function setDesiredNodePosition(nodeId, pos) {\n    flock.setDesiredBoidPosition(nodeId, pos);\n  }\n}","export default function createInterpolateLayout(from, to, duration = 100) {\n  let t = 0;\n  let elapsed = 0;\n\n  return {\n    step,\n    getNodePosition,\n    done,\n  };\n\n  function step() {\n    elapsed += 1;\n  }\n\n  function done() {\n    return elapsed > duration;\n  }\n\n  function getNodePosition(nodeId) {\n    t = ease(elapsed/duration);\n    let fromPos = from.getNodePosition(nodeId);\n    let toPos = to.getNodePosition(nodeId);\n\n    return {\n      x: fromPos.x * (1 - t) + toPos.x * t,\n      y: fromPos.y * (1 - t) + toPos.y * t\n    }\n  }\n\n  function ease(t) {\n    return t*(2-t);\n  }\n}","import Delaunator from 'delaunator';\nimport createGraph from 'ngraph.graph';\n\nexport default function getDelaunayGraph(vertices) {\n  const delaunay = Delaunator.from(vertices);\n  const triangles = delaunay.triangles;\n  const triangulationGraph = createGraph()\n  vertices.forEach(v => {\n    triangulationGraph.addNode(v.id, v);\n  });\n\n  for (let i = triangles.length; i;) {\n    --i\n    const first = vertices[triangles[i]]\n    --i\n    const second = vertices[triangles[i]]\n    --i\n    const third = vertices[triangles[i]]\n\n    addTriangulationLink(first.id, second.id, triangulationGraph)\n    addTriangulationLink(second.id, third.id, triangulationGraph)\n    addTriangulationLink(third.id, first.id, triangulationGraph)\n  }\n\n  return triangulationGraph;\n}\n\nfunction addTriangulationLink (fromId, toId, tGraph) {\n  tGraph.addLink(fromId, toId)\n}\n","const createGraph = require('ngraph.graph')\n\nexport default function makeSpanningTree(mstEdges) {\n  const graph = createGraph();\n\n  mstEdges.forEach(e => {\n    graph.addLink(e.from.id, e.to.id)\n  })\n\n  // Doesn't really matter what is the root\n  const rootId = mstEdges[0].from.id\n\n  return {\n    getGraph() {\n      return graph\n    },\n    getRootId() {\n      return rootId\n    },\n    get(id) {\n      return graph.gentNode(id)\n    }\n  }\n}\n","import findMinimumSpanningTree from 'ngraph.kruskal';\nimport getDelaunayGraph from './getDelaunayGraph';\nimport makeSpanningTree from './makeSpanningTree';\n\nclass EdgeModel {\n  constructor (from, to) {\n    this.from = from\n    this.to = to\n  }\n}\n\n/**\n * For a given set of rectangles, removes overlaps\n *\n * @param {Map} rectangles - rectId -> Rectangle mapping\n */\nexport default function removeOverlaps(rectangles, options) {\n  // Convert rectangle centers into vertices, that we can feed into Delaunay\n  // triangulation\n  const vertices = []\n  options = options || {}\n\n  const canMove = options.canMove || yes\n  const pullX = options.pullX || false\n  const pullY = options.pullY || false\n\n  if (rectangles.size < 2) {\n    return;\n  }\n  if (rectangles.size === 2) {\n    // we cannot triangulate this, so let's just cal it directly\n    let arrayOfRects = Array.from(rectangles).map(x => x[1]);\n\n    removeOverlapsForRectangles(arrayOfRects[0], arrayOfRects[1]);\n    return;\n  }\n\n  rectangles.forEach(r => {\n    const pair = [r.cx, r.cy]\n    pair.id = r.id\n    vertices.push(pair)\n  })\n\n  const triangulationGraph = getDelaunayGraph(vertices)\n  triangulationGraph.forEachLink(addTriangulationLinkWeight);\n\n  const mst = findMinimumSpanningTree(triangulationGraph, e => e.data)\n  const mstEdges = mst.map(edge => new EdgeModel(\n    getRect(edge.fromId),\n    getRect(edge.toId)\n  ))\n\n  let spanningTree\n  if (mstEdges.length > 0) {\n    spanningTree = makeSpanningTree(mstEdges)\n\n    grow(spanningTree)\n  }\n\n  return\n\n  function getRect (id) {\n    return rectangles.get(id)\n  }\n\n  function grow(spanningTree) {\n    const spanningGraph = spanningTree.getGraph()\n\n    const processed = new Set()\n    growAt(spanningTree.getRootId())\n\n    function growAt(nodeId) {\n      if (processed.has(nodeId)) return\n\n      processed.add(nodeId)\n\n      const rootPos = getRect(nodeId)\n\n      spanningGraph.forEachLinkedNode(nodeId, otherNode => {\n        if (processed.has(otherNode.id)) return\n\n        const childPos = getRect(otherNode.id)\n        removeOverlapsForRectangles(rootPos, childPos);\n        growAt(otherNode.id)\n      })\n    }\n  }\n\n  function removeOverlapsForRectangles(rootPos, childPos) {\n    if (overlaps(rootPos, childPos)) {\n      let t = getOverlapFactor(rootPos, childPos)\n      let dx = (childPos.cx - rootPos.cx)\n      let dy = (childPos.cy - rootPos.cy)\n\n      if (!Number.isFinite(t)) {\n        t = 1\n        dx = 1e-3\n        dy = -1e-3\n      }\n\n      if (canMove(childPos.id)) {\n        childPos.cx = rootPos.cx + t * dx\n        childPos.cy = rootPos.cy + t * dy\n      } else {\n        rootPos.cx = childPos.cx - t * dx\n        rootPos.cy = childPos.cy - t * dy\n      }\n    }\n  }\n\n  /**\n  * Given two rectangles returns a value by which they overlap\n  */\n  function getOverlapFactor (a, b) {\n    const dx = Math.abs(a.cx - b.cx)\n    const dy = Math.abs(a.cy - b.cy)\n\n    const wx = (a.width + b.width) / 2\n    const wy = (a.height + b.height) / 2\n\n    const t = Math.min(wx / dx, wy / dy)\n    return t\n  }\n\n  function addTriangulationLinkWeight(link) {\n    const from = getRect(link.fromId)\n    const to = getRect(link.toId)\n    const weight = getTriangulationWeight(from, to)\n    link.data = weight;\n  }\n\n  function getTriangulationWeight(a, b) {\n    if (overlaps(a, b)) {\n      const centerDistance = getPointDistance(a, b)\n      const t = getOverlapFactor(a, b)\n      return -(t - 1) * centerDistance\n    }\n\n    return getRectangularDistance(a, b)\n  }\n\n  function overlaps(a, b) {\n    if (pullX) {\n      return true;\n    }\n    // If one rectangle is on left side of other\n    // NOTE: This gives funny results when we always return true\n    if (a.left > b.right || b.left > a.right) return pullX\n\n    // If one rectangle is above other\n    if (a.top > b.bottom || b.top > a.bottom) return pullY\n\n    return true\n  }\n\n  function getRectangularDistance(a, b) {\n    if (overlaps(a, b)) return 0\n    let dx = 0\n    let dy = 0\n\n    if (a.right < b.left) {\n      dx = b.right - a.left\n    } else if (b.right < a.left) {\n      dx = a.left - b.right\n    }\n\n    if (a.top < b.bottom) {\n      dy = b.bottom - a.top\n    } else if (b.top < a.bottom) {\n      dy = a.bottom - b.top\n    }\n\n    return Math.sqrt(dx * dx + dy * dy)\n  }\n\n  function getPointDistance(a, b) {\n    const dx = a.cx - b.cx\n    const dy = a.cy - b.cy\n\n    return Math.sqrt(dx * dx + dy * dy)\n  }\n}\n\nfunction yes() {\n  return true\n}\n","export default class Rect {\n  constructor (params) {\n    Object.assign(this, params)\n    if (!isNumber(this.left)) throw new Error('Left is wrong')\n    if (!isNumber(this.top)) throw new Error('top is wrong')\n    if (!isNumber(this.width)) throw new Error('width is wrong')\n    if (!isNumber(this.height)) throw new Error('height is wrong')\n  }\n\n  inflate(factor) {\n    this.left += factor * this.width/2;\n    this.top += factor * this.height/2;\n    this.width *= factor;\n    this.height *= factor;\n  }\n\n  get right () {\n    return this.left + this.width\n  }\n\n  get bottom () {\n    return this.top + this.height\n  }\n\n  get cx () {\n    return this.left + this.width / 2\n  }\n\n  get cy () {\n    return this.top + this.height / 2\n  }\n\n  set cx (x) {\n    this.left = x - this.width / 2\n  }\n\n  set cy (y) {\n    this.top = y - this.height / 2\n  }\n}\n\nfunction isNumber (x) {\n  if (!Number.isFinite(x)) return false\n  return true\n}\n","/**\n * This is the core of the layout. The layout here is kind of \"cheating\"\n * layout. The real layout happens in the background and is never shown on\n * the screen until either certain amount of iterations has finished\n * or time quota allowed for the layout exceeded.\n * \n * While background layout does the work, on the front end nodes are \n * flying according to \"Boids\" algorithm (flocking behavior).\n * \n * When background algorithm is finished, the boids are flying to the\n * final positions with simple interpolation animation.\n */\nimport createFakeLayout from './layout/boidLayout';\nimport createInterpolateLayout from './createInterpolateLayout';\nimport removeOverlaps from './layout/removeOverlaps';\nimport Rect from './layout/Rect';\n\nlet eventify = require('ngraph.events');\n\nlet createLayout = require('ngraph.forcelayout')\n\nconst USE_FAKE = 1;\nconst USE_INTERPOLATE = 2;\nconst REMOVE_OVERLAPS = 3;\nconst USE_REAL = 4;\n\n/**\n * Orchestrates layout of algorithm between phases.\n */\nexport default function createAggregateLayout(graph, progress) {\n  const MAX_DEPTH = graph.maxDepth;\n  let physicsLayout = createPhysicsLayout(graph);\n  let fakeLayout = createFakeLayout(graph);\n  let interpolateLayout = createInterpolateLayout(fakeLayout, physicsLayout);\n\n  let isGraphReady = false;\n  let layoutIterations = 0;\n  let layoutTime = 0;\n  let maxLayoutIterations = 2000;\n  let maxLayoutTime = 2000;\n  let phase = USE_FAKE;\n  let rectangles = new Map();\n\n  var api = eventify({\n    step,\n    pinNode,\n    getNodePosition,\n    addNode,\n    setGraphReady,\n    getGraphReady\n  })\n\n  return api;\n\n  function setGraphReady() {\n    layoutIterations = 0;\n    layoutTime = 0;\n    isGraphReady = true;\n  }\n\n  function getGraphReady() {\n    return isGraphReady;\n  }\n\n  function addNode(nodeId, rect) {\n    fakeLayout.addNode(nodeId, rect);\n    rectangles.set(nodeId, rect);\n  }\n\n  function getNodePosition(nodeId) {\n    if (phase === USE_FAKE || phase === REMOVE_OVERLAPS) return fakeLayout.getNodePosition(nodeId);\n    if (phase === USE_REAL) return physicsLayout.getNodePosition(nodeId);\n    if (phase === USE_INTERPOLATE) return interpolateLayout.getNodePosition(nodeId);\n  }\n\n  function step() {\n    if (!isGraphReady || layoutIterations < maxLayoutIterations) {\n      phase = USE_FAKE;\n      let start = window.performance.now();\n      fakeLayout.step();\n\n      do {\n        physicsLayout.step();\n        layoutIterations += 1;\n      } while (window.performance.now() - start < 10)\n      layoutTime += window.performance.now() - start;\n      \n\n      if (layoutTime > maxLayoutTime) layoutIterations = maxLayoutIterations;\n      const finished = Math.min(1, Math.max(layoutTime/maxLayoutTime, layoutIterations/maxLayoutIterations));\n      syncLayouts();\n\n      progress.setLayoutCompletion(Math.round(finished * 100));\n\n      if (layoutIterations >= maxLayoutIterations) phase = REMOVE_OVERLAPS;\n\n      return true;\n    } else if (phase === REMOVE_OVERLAPS) {\n      runOverlapsRemoval();\n      phase = USE_INTERPOLATE;\n\n      return true;\n    } else if (phase === USE_INTERPOLATE) {\n      interpolateLayout.step();\n      if (interpolateLayout.done()) {\n        phase = USE_REAL;\n        api.fire('ready', api);\n      }\n      return true;\n    } \n\n    return false;\n  }\n\n  function syncLayouts() {\n    graph.forEachNode(function (node) {\n      var pos = physicsLayout.getNodePosition(node.id);\n      fakeLayout.setDesiredNodePosition(node.id, pos);\n    })\n  }\n\n  function runOverlapsRemoval() {\n    // TODO: Async?\n    let rectangles = getRectangles();\n    removeOverlaps(rectangles);\n    removeOverlaps(rectangles);\n    removeOverlaps(rectangles);\n    rectangles.forEach((rect, nodeId) => {\n      physicsLayout.setNodePosition(nodeId, rect.left - rect.dx, rect.top - rect.dy);\n    });\n  }\n\n  function getRectangles() {\n    let rects = new Map();\n    rectangles.forEach((rect, id) => {\n      let pos = physicsLayout.getNodePosition(id);\n      let {width, height} = rect;\n      const inflatedRect = new Rect({\n        id, \n        left: pos.x + rect.x,\n        top: pos.y + rect.y,\n        dx: rect.x,\n        dy: rect.y,\n        width,\n        height,\n      });\n      rects.set(id, inflatedRect);\n    });\n\n    return rects;\n  }\n\n  function pinNode(node) {\n    physicsLayout.pinNode(node, true);\n  }\n\n  function createPhysicsLayout() {\n    return createLayout(graph, {\n      springLength: 20,\n      springCoeff: 0.002,\n      gravity: -1.2,\n      theta: 0.8,\n      dragCoeff: 0.02,\n      timeStep: 14,\n      nodeMass(nodeId) {\n        let links = graph.getLinks(nodeId);\n        let mul = links ? links.length : 1;\n        let node = graph.getNode(nodeId);\n        mul *=  (MAX_DEPTH - node.data.depth) + 1;\n        return nodeId.length * mul;\n      }\n    });\n  }\n}","/**\n * This file is responsible for animating edges when nodes positions are known.\n */\nlet svg = require('simplesvg');\nlet random = require('ngraph.random')(42);\n\nexport default function createLinkAnimator(graph, layout, edgeContainer) {\n  const links = new Map();\n  let beingAnimated = new Map();\n  const scheduled = [];\n  let maxAnimations = 20;\n  let maxDepth = graph.maxDepth;\n  graph.forEachLink(scheduleLink);\n  scheduled.sort((a, b) => {\n    return getLinkScore(a) - getLinkScore(b)\n  })\n  let processor = requestAnimationFrame(processNext);\n\n  return {\n    getLinkInfo,\n    dispose\n  }\n\n  function dispose() {\n    if (processor) {\n      cancelAnimationFrame(processor);\n      processor = null;\n    }\n  }\n\n  function processNext() {\n    while (beingAnimated.size < maxAnimations && scheduled.length > 0) {\n      let link = scheduled.pop()\n      let speed = Math.round(Math.abs(random.gaussian() * 30)) + 1\n      beingAnimated.set(link.id, animateLink(link, speed));\n    }\n\n    beingAnimated.forEach(function(el, key) {\n      el.step();\n      if (el.isDone) beingAnimated.delete(key);\n    });\n    if (scheduled.length > 0 || beingAnimated.size > 0) {\n      processor = requestAnimationFrame(processNext);\n    }\n  }\n\n  function getLinkInfo(linkId) {\n    return links.get(linkId);\n  }\n\n  function getLinkScore(link) {\n    let fromNode = graph.getNode(link.fromId).data;\n    let toNode = graph.getNode(link.toId).data;\n    const depth = (fromNode.depth + toNode.depth)/2;\n    return (maxDepth - depth)/maxDepth;\n  }\n\n  function scheduleLink(link) {\n    scheduled.push(link);\n  }\n\n  function animateLink(link, maxT) {\n    var frame = 0;\n    let from = layout.getNodePosition(link.fromId);\n    let to = layout.getNodePosition(link.toId);\n\n    const dRatio = getLinkScore(link)\n    const strokeWidth = 8 * dRatio + 2;\n    const color = Math.round((200 - 75) * (1 - dRatio) + 75);\n\n    let api = {\n      step,\n      isDone: false\n    }\n    return api;\n\n    function step() {\n      let t = ease(frame/maxT);\n      let x = from.x * (1 - t) + to.x * t;\n      let y = from.y * (1 - t) + to.y * t;\n      let linkInfo = links.get(link.id);\n      let pathData = `M${from.x},${from.y} L${x},${y}`;\n      if (!linkInfo) {\n        const ui = svg('path', {\n          class: 'link-ui',\n          id: link.id,\n          'stroke-width': strokeWidth,\n          fill: 'black',\n          stroke: `rgb(${color}, ${color}, ${color})`,\n          d: pathData \n        });\n        edgeContainer.appendChild(ui);\n\n        links.set(link.id, {ui, link});\n      } else {\n        linkInfo.ui.attr('d', pathData);\n      }\n      frame += 1;\n      if (frame > maxT) {\n        api.isDone = true;\n      }\n    }\n  }\n}\n\nfunction ease(t) {\n  return t*(2-t);\n}","import Flatbush from 'flatbush';\n\n/**\n * This function constructs a spatial index for every edge of a graph,\n * so that users don't have to be extremely precise with mouse movement\n * when hovering over an edge.\n */\nexport default function buildLinkIndex(graph, layout, maxDistance = 42) {\n  // The `pointIndex` is spatial lookup into collection of `points`.\n  // Each point has a `link` and `x, y` coordinates.\n  let {pointIndex, points} = createInternalIndex();\n  \n  return {\n    /**\n     * Finds an edge near `x, y` coordinates\n     */\n    findNearestLink,\n\n    /**\n     * Just a debugger method to render indexed points\n     */\n    getPoints() { return points; }\n  };\n\n  function findNearestLink(x, y) {\n    const neighborIds = pointIndex.neighbors(x, y, 1);\n    let pointId = neighborIds[0];\n    if (pointId === undefined) return;\n    let point = points[pointId];\n    if (distance({x,y}, point) < maxDistance) return point.link;\n  }\n\n  function createInternalIndex() {\n    // The main idea is very simple - slice every single link with a ball of radius\n    // `maxDistance`, and then build a spatial index tree.\n    let step = maxDistance\n    let points = [];\n\n    graph.forEachLink(link => {\n      let from = layout.getNodePosition(link.fromId);\n      let to = layout.getNodePosition(link.toId)\n      let linkDistance = distance(from, to);\n\n      // This is going to be the direction in which we will be adding circles:\n      let dx = to.x - from.x; let dy = to.y - from.y;\n      dx /= linkDistance; dy /= linkDistance;\n\n      // Start from the link point\n      let nextPoint = {\n        x: from.x,\n        y: from.y,\n        link\n      };\n\n      // And slice the link into pieces...\n      while (distance(nextPoint, from) < linkDistance) {\n        points.push(nextPoint);\n        nextPoint = {\n          x: nextPoint.x + step * dx,\n          y: nextPoint.y + step * dy,\n          link\n        };\n      }\n\n      // Don't forget about last point of the link:\n      points.push({\n        x: to.x,\n        y: to.y,\n        link\n      });\n    });\n\n    // Now we have all points, we can build spatial index:\n    let pointIndex = new Flatbush(points.length)\n    let pointSize = step * 0.4;\n    points.forEach(point => {\n      pointIndex.add(\n        point.x - pointSize, point.y - pointSize, \n        point.x + pointSize, point.y + pointSize\n      );\n    });\n    pointIndex.finish();\n    return {pointIndex, points};\n  }\n}\n\nfunction distance(a, b) {\n  let dx = b.x - a.x;\n  let dy = b.y - a.y;\n  return Math.sqrt(dx * dx + dy * dy);\n}","/**\n * The core of the rendering process\n */\nimport createPanZoom from 'panzoom';\nimport createTextMeasure from './measureText';\nimport createAggregateLayout from './aggregateLayout';\nimport bus from '../bus';\nimport createLinkAnimator from './renderer/linkAnimator';\nimport buildLinkIndex from './buildLinkIndex';\n\nlet svg = require('simplesvg');\n\n/**\n * Creates a new renderer. The rendering is done with SVG.\n */\nexport default function createRenderer(progress) {\n  const scene = document.querySelector('#scene');\n  const nodeContainer = scene.querySelector('#nodes');\n  const edgeContainer = scene.querySelector('#edges');\n  const hideTooltipArgs = {isVisible: false};\n  const svgEl = document.querySelector('svg');\n  const pt = svgEl.createSVGPoint();\n  const panzoom = createPanZoom(scene);\n  const defaultRectangle = {left: -500, right: 500, top: -500, bottom: 500}\n  panzoom.showRectangle(defaultRectangle);\n\n  // maps node id to node ui\n  let nodes = new Map();\n\n  let linkIndex;\n  let layout, graph, currentLayoutFrame = 0, linkAnimator;\n  let textMeasure = createTextMeasure(scene);\n  bus.on('graph-ready', onGraphReady);\n\n  return {\n    render,\n    dispose\n  }\n\n  function dispose() {\n    clearLastScene();\n    bus.off('graph-ready', onGraphReady);\n  }\n\n  function onMouseMove(e) {\n    let link = findLinkInfoFromEvent(e);\n    if (link) {\n      showTooltip(link, e.clientX, e.clientY);\n    } else {\n      hideTooltip();\n    }\n  }\n\n  function getNearestLink(x, y) {\n    if (!linkIndex) return;\n\n    pt.x = x; pt.y = y;\n    let svgP = pt.matrixTransform(scene.getScreenCTM().inverse());\n    let link = linkIndex.findNearestLink(svgP.x, svgP.y, 30);\n    if (link) return link.id;\n  }\n\n  function onSceneClick(e) {\n    let info = findLinkInfoFromEvent(e);\n    if (info)  {\n      bus.fire('show-details', info.link);\n    }\n  }\n\n  function findLinkInfoFromEvent(e) {\n    const id = e.target && e.target.id;\n    let linkInfo = linkAnimator.getLinkInfo(id);\n    if (!linkInfo) {\n      let linkId = getNearestLink(e.clientX, e.clientY);\n      linkInfo = linkAnimator.getLinkInfo(linkId);\n    }\n    return linkInfo;\n  }\n\n  function showTooltip(minLink, clientX, clientY) {\n    const {fromId, toId} = minLink.link;\n    bus.fire('show-tooltip', {\n      isVisible: true,\n      from: fromId, \n      to: toId, \n      x: clientX,\n      y: clientY\n    });\n\n    removeHighlight();\n\n    nodes.get(fromId).classList.add('hovered');\n    nodes.get(toId).classList.add('hovered');\n    minLink.ui.classList.add('hovered');\n  }\n\n  function hideTooltip() {\n    bus.fire('show-tooltip', hideTooltipArgs);\n    removeHighlight();\n  }\n\n  function removeHighlight() {\n    scene.querySelectorAll('.hovered').forEach(removeHoverClass);\n  }\n\n  function removeHoverClass(el) {\n    el.classList.remove('hovered');\n  }\n\n  function render(newGraph) {\n    clearLastScene();\n    graph = newGraph;\n\n    layout = createAggregateLayout(graph, progress);\n    \n    layout.on('ready', drawLinks);\n\n    nodes = new Map();\n\n    graph.forEachNode(addNode);\n    graph.on('changed', onGraphStructureChanged);\n\n    cancelAnimationFrame(currentLayoutFrame);\n    currentLayoutFrame = requestAnimationFrame(frame)\n  }\n\n  function onGraphReady(readyGraph) {\n    if (readyGraph === graph) {\n      layout.setGraphReady();\n      progress.startLayout();\n    }\n  }\n\n  function frame() {\n    if (layout.step()) {\n      currentLayoutFrame = requestAnimationFrame(frame)\n    }\n    updatePositions();\n  }\n\n  function onGraphStructureChanged(changes) {\n    changes.forEach(change => {\n      if (change.changeType === 'add' && change.node) {\n        addNode(change.node);\n      }\n    })\n  }\n\n  function drawLinks() {\n    progress.done();\n    linkAnimator = createLinkAnimator(graph, layout, edgeContainer);\n    document.addEventListener('mousemove', onMouseMove);\n    svgEl.addEventListener('click', onSceneClick);\n    let radius = 42;\n    linkIndex = buildLinkIndex(graph, layout, radius);\n    // let points = linkIndex.getPoints();\n    // points.forEach(point => {\n    //   scene.appendChild(svg('circle', {\n    //     cx: point.x,\n    //     cy: point.y,\n    //     r: radius,\n    //     fill: 'transparent',\n    //   }))\n    // })\n  }\n\n  function clearLastScene() {\n    clear(nodeContainer);\n    clear(edgeContainer);\n\n    document.removeEventListener('mousemove', onMouseMove);\n    svgEl.removeEventListener('click', onSceneClick);\n    if (layout) layout.off('ready', drawLinks);\n    if (graph) graph.off('changed', onGraphStructureChanged);\n    if (linkAnimator) linkAnimator.dispose();\n  }\n\n  function clear(el) {\n    while (el.lastChild) {\n        el.removeChild(el.lastChild);\n    }\n  }\n\n  function addNode(node) {\n    const dRatio = (graph.maxDepth - node.data.depth)/graph.maxDepth;\n    let pos = getNodePosition(node.id);\n    if (node.data.depth === 0) {\n      layout.pinNode(node);\n    }\n\n    const uiAttributes = getNodeUIAttributes(node.id, dRatio);\n    layout.addNode(node.id, uiAttributes);\n\n    const rectAttributes = {\n      x: uiAttributes.x,\n      y: uiAttributes.y,\n      width: uiAttributes.width,\n      height: uiAttributes.height,\n      rx: uiAttributes.rx,\n      ry: uiAttributes.ry,\n      fill: 'white',\n      'stroke-width': uiAttributes.strokeWidth, \n      stroke: '#58585A'\n    }\n    const textAttributes = {\n      'font-size': uiAttributes.fontSize,\n      x: uiAttributes.px,\n      y: uiAttributes.py\n    }\n    \n    const rect = svg('rect', rectAttributes);\n    const text = svg('text', textAttributes)\n    text.text(node.id);\n\n    const ui = svg('g', {\n      transform: `translate(${pos.x}, ${pos.y})`\n    });\n    ui.appendChild(rect);\n    ui.appendChild(text);\n\n    nodeContainer.appendChild(ui);\n    nodes.set(node.id, ui);\n  }\n\n\n  function getNodeUIAttributes(nodeId, dRatio) {\n    const fontSize = 24 * dRatio + 12;\n    const size = textMeasure(nodeId, fontSize);\n    const width = size.totalWidth + size.spaceWidth * 6;\n    const height = fontSize * 1.6;\n\n    return {\n      fontSize,\n      width,\n      height,\n      x: -width/2,\n      y: -height/2,\n      rx: 15 * dRatio + 2,\n      ry: 15 * dRatio + 2,\n      px: -width/2 + size.spaceWidth*3,\n      py: -height/2 + fontSize * 1.1,\n      strokeWidth: 4 * dRatio + 1\n    };\n  }\n\n  function updatePositions() {\n    nodes.forEach((ui, nodeId) => {\n      let pos = getNodePosition(nodeId)\n      ui.attr('transform', `translate(${pos.x}, ${pos.y})`);\n    });\n  }\n\n  function getNodePosition(nodeId) {\n    return layout.getNodePosition(nodeId);\n  }\n}","<template>\n  <div class='about'>\n    <div class='background absolute' @click.prevent='close'></div>\n    <div class='content'>\n      <h3>Autocomplete vs Graph <a class='close bold highlight' href='#' @click.prevent='close'>close</a></h3>\n      <p>\n        Have you ever noticed how Google auto-completes your queries? Like so:\n        <img src=\"https://i.imgur.com/Dz0crfG.gif\" alt=\"google auto complete demo\" width='300px'>\n      </p>\n      <p>What if we repeat the same query for every suggestion? We will get a bigger picture:</p>\n      <img src=\"https://i.imgur.com/aqzfpBJ.png\" alt=\"Bigger picture with all searches\" width='300px'>\n      \n      <p>Now let's repeat this process one more time for every found suggestion. But instead of\n        drawing a picture, let's draw a line between each suggestion:</p>\n        <img src=\"https://i.imgur.com/OBbEJP7.png\" alt=\"suggestions graph\" width=\"300px\">\n\n      <p>And this is exactly what this website is doing for You.</p>\n      <p>I found this technique useful to find alternatives, or to perform a market research.\n        Obviously, for this technique to work, Google needs to know enough about your query.\n      </p>\n      <p>I hope you like it! Please let me know.</p>\n      <ul>\n        <li>\n          <a href='https://github.com/anvaka/vs' class='highlight'>Read source code</a> of this project on GitHub\n        </li><li>\n        Stay tuned for updates on <a href='https://twitter.com/anvaka' class='highlight'>Twitter.</a>\n        </li><li>\n        <a href='https://www.patreon.com/anvaka' class='highlight'>Support me on Patreon</a> .\n        </li>\n      </ul>\n      <p>With passion,<br/> Anvaka</p>\n      <a href='#' @click.prevent='close' class='large-close bold highlight'>\n        close\n      </a>\n    </div>\n  </div>\n</template>\n<script>\n\nexport default {\n  mounted() {\n    this.closeHandler = (e) => {\n      if (e.keyCode === 27) {\n        e.preventDefault();\n        this.close();\n      }\n    }\n    document.addEventListener('keyup', this.closeHandler);\n  },\n  beforeUnmount() {\n    document.removeEventListener('keyup', this.closeHandler);\n  },\n  methods: {\n    close() {\n      this.$emit('close');\n    }\n  }\n}\n</script>\n\n<style lang='stylus'>\n.about {\n  position: fixed;\n  overflow: hidden;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n\n  .close {\n    position: absolute;\n    right: 15px;\n    font-size: 12px;\n  }\n\n  .large-close {\n    width: 100%;\n    height: 32px;\n    display: block;\n    text-align: center;\n  }\n\n  .content {\n    overflow-y: auto;\n    max-height: 100%;\n    box-shadow: 0 2px 4px rgba(0,0,0,0.2), 0 -1px 0px rgba(0,0,0,0.02);\n    position: absolute;\n    background-color: white;\n    width: 400px;\n    padding: 14px;\n    border: 1px solid #58585A;\n    h3 {\n      margin: 0;\n      font-weight: normal;\n    }\n  }\n}\n\n\n.background {\n  position: absolute;\n  background-color: #58585A;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n@media (max-width: 800px) {\n  .about {\n    justify-content: initial;\n  }\n  .about .content {\n    width: 100%;\n    border: none;\n  }\n}\n</style>\n","import { render } from \"./About.vue?vue&type=template&id=7efec9c8\"\nimport script from \"./About.vue?vue&type=script&lang=js\"\nexport * from \"./About.vue?vue&type=script&lang=js\"\n\nimport \"./About.vue?vue&type=style&index=0&id=7efec9c8&lang=stylus\"\n\nimport exportComponent from \"/home/runner/work/vs/vs/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class='query-input-container' @click.prevent='focus'>\n    <input class='search-input' \n      :value='modelValue' @input=\"$emit('update:modelValue', $event.target.value)\"\n      type='text' :placeholder='placeholder' autofocus ref='input'>\n    <span type='text' class='prefix' ref='prefix'>{{patternPrefix}}</span> \n    <span class='search-measure' ref='measure'></span>\n    <span type='text' class='suffix' ref='suffix'>{{patternReminder}}</span> \n  </div>\n</template>\n\n<script>\n/**\n * A user control that renders input string with read-only prefix/suffix\n */\nexport default {\n  props: ['placeholder', 'modelValue', 'pattern'],\n  watch: {\n    modelValue() {\n      this.ensureSuffixPos();\n    }\n  },\n  computed: {\n    patternReminder() {\n      return this.pattern.split('[query]')[1];\n    },\n    patternPrefix() {\n      return this.pattern.split('[query]')[0];\n    }\n  },\n  methods: {\n    focus() {\n      this.$refs.input.focus();\n    },\n    ensureSuffixPos() {\n      // We have to measure each bit of text (prefix, content, suffix), so that\n      // we can place labels accordingly.\n      // Good thing that this doesn't happen often. Otherwise this would be super slow\n      const {suffix, measure, prefix} = this.$refs;\n\n      measure.innerText = this.modelValue;\n      let textWidth = this.$refs.measure.getBoundingClientRect();\n\n      measure.innerText = this.patternReminder;\n      let suffixBox = measure.getBoundingClientRect();\n\n      measure.innerText = this.patternPrefix;\n      let prefixBox = measure.getBoundingClientRect();\n\n      let selfBox = this.$el.getBoundingClientRect();\n      let maxValue = selfBox.width - suffixBox.width;\n\n      let suffixPos = Math.min(prefixBox.width + textWidth.width + 4, maxValue);\n      if (this.modelValue.length === 0) {\n        // When there is nothing entered, let's hide prefix/suffix.\n        suffix.style.visibility = 'hidden';\n        prefix.style.visibility = 'hidden';\n        this.$refs.input.style.paddingRight = '0';\n        this.$refs.input.style.paddingLeft = '0';\n      } else {\n        suffix.style.visibility = 'visible';\n        prefix.style.visibility = 'visible';\n        suffix.style.left = suffixPos + 'px';\n        prefix.style.right = prefixBox.width + 'px';\n        this.$refs.input.style.paddingRight = suffixBox.width + 'px';\n        this.$refs.input.style.paddingLeft = prefixBox.width + 'px';\n      }\n    }\n  },\n  mounted() {\n    this.ensureSuffixPos();\n  }\n}\n</script>\n\n<style lang=\"stylus\">\n@import('../vars.styl');\n\n.query-input-container {\n  position: relative;\n  span {\n    display: inline;\n  }\n  .search-measure, .suffix {\n    position: absolute;\n    left: 0;\n  }\n  .suffix {\n    right: 0;\n    top: 0;\n    bottom: 0;\n    position: absolute;\n    display: flex;\n    color: #eaaac0;\n    pointer-events: none;\n  }\n\n  .prefix {\n    pointer-events: none;\n    left: 0;\n    top: 0;\n    bottom: 0;\n    position: absolute;\n    display: flex;\n    color: #eaaac0;\n  }\n\n  input {\n    border: none;\n    font-family: 'Avenir', Helvetica, Arial, sans-serif;\n    padding: 0;\n    color: highlight-color\n    height: 100%;\n    font-size: 16px;\n    &:focus {\n      outline: none;\n    }\n  }\n}\n\n.search-measure {\n  white-space: pre;\n  visibility: hidden;\n}\n\ninput.search-input {\n  width: 100%;\n\n}\n\n</style>\n","import { render } from \"./QueryInput.vue?vue&type=template&id=302a6804\"\nimport script from \"./QueryInput.vue?vue&type=script&lang=js\"\nexport * from \"./QueryInput.vue?vue&type=script&lang=js\"\n\nimport \"./QueryInput.vue?vue&type=style&index=0&id=302a6804&lang=stylus\"\n\nimport exportComponent from \"/home/runner/work/vs/vs/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=109f2160\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=109f2160&lang=stylus\"\n\nimport exportComponent from \"/home/runner/work/vs/vs/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","/**\n * This is the entry point into the application. \n * \n * From here I recommend to go to ./lib/buildGraph.js to see how the graph is created\n * or to the ./lib/createRenderer.js that initializes rending process\n */\nimport {createApp} from 'vue'\nimport App from './App'\n\n/* eslint-disable no-new */\ncreateApp(App).mount('#app');\n// new Vue({\n//   el: '#app',\n//   components: { App },\n//   template: '<App/>'\n// })\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkvs\"] = self[\"webpackChunkvs\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(1161); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","class","_createElementVNode","href","_createElementBlock","_hoisted_1","onSubmit","$options","onClick","_createVNode","_component_query_input","placeholder","$data","query","pattern","ref","type","_hoisted_2","_hoisted_3","progress","message","_hoisted_4","_hoisted_5","_createBlock","_component_about","onClose","hasGraph","_hoisted_6","_hoisted_7","text","myIndex","jsonpFetch","url","isCancelled","actualResolve","loadScript","name","window","downloaded","cancelable","Promise","download","cancel","resolve","reject","document","createElement","src","onerror","head","appendChild","e","dispose","removeChild","bus","require","buildGraph","entryWord","MAX_DEPTH","trim","toLocaleLowerCase","insertPosition","indexOf","Error","queryPosition","pendingResponse","cancelled","graph","maxDepth","queue","requestDelay","Math","random","startDownload","startQueryConstruction","addNode","depth","fetchNext","loadSiblings","parent","results","q","fullQuery","parentNode","getNode","filter","x","map","substring","length","forEach","other","hasOtherNode","hasNode","hasOtherLink","getLink","addLink","data","push","setTimeout","loadNext","fire","nextWord","shift","updateLayout","getResponse","then","res","onPendingReady","catch","msg","err","console","error","downloadError","replace","encodeURIComponent","Progress","constructor","this","phase","errors","remaining","currentWord","layout","iteration","working","startLayout","setLayoutCompletion","layoutCompletion","done","reset","queryState","qs","useSearch","lastBuilder","appStateFromQuery","get","appState","reactive","updateAppState","newState","performSearch","queryString","set","Object","freeze","resolveQueryFromLink","from","to","getAppState","onChange","svgns","xmlns","createTextMeasure","svgContainer","options","useFastTextMeasure","cachedSizes","cachedWords","create","abc","avgLetterWidthByFontSize","safariGuess","measure","fontSize","round","cacheKey","cachedResult","result","textContainer","createElementNS","setAttributeNS","words","split","toWordWidths","spaceWidth","measureSpaceWidth","totalWidth","sumUpWordsLengthInPixels","width","word","spaceWidthKey","textContent","measureTextWidth","measureText","measureAvgWidth","preciseMeasure","cachedWordsKey","size","undefined","avgWidthAtFontSize","abcWidth","svgTextElement","getBBox","Vector","y","sub","a","b","dist","dx","dy","sqrt","normalize","l","mag","add","div","scalar","mult","limit","maxMag","distanceTo","Flock","boids","Map","neighbors","run","boid","nodeId","forEachLinkedNode","otherBoid","addBoid","setDesiredBoidPosition","boidId","pos","setDesiredPosition","Boid","acceleration","angle","nextDouble","PI","velocity","cos","sin","position","desiredPosition","r","maxspeed","maxforce","flock","update","applyForce","force","nCount","sep","separate","ali","align","coh","cohesion","mass","pull","seek","target","desired","steer","desiredseparation","count","d","diff","neighbordist","sum","createRandom","createFakeLayout","nodes","getNodePosition","setDesiredNodePosition","step","createInterpolateLayout","duration","t","elapsed","ease","fromPos","toPos","getDelaunayGraph","vertices","delaunay","Delaunator","triangles","triangulationGraph","createGraph","v","i","first","second","third","addTriangulationLink","fromId","toId","tGraph","makeSpanningTree","mstEdges","rootId","getGraph","getRootId","gentNode","EdgeModel","removeOverlaps","rectangles","canMove","yes","pullX","pullY","arrayOfRects","Array","removeOverlapsForRectangles","pair","cx","cy","forEachLink","addTriangulationLinkWeight","mst","findMinimumSpanningTree","edge","getRect","spanningTree","grow","spanningGraph","processed","Set","growAt","has","rootPos","otherNode","childPos","overlaps","getOverlapFactor","Number","isFinite","abs","wx","wy","height","min","link","weight","getTriangulationWeight","centerDistance","getPointDistance","getRectangularDistance","left","right","top","bottom","Rect","params","assign","isNumber","inflate","factor","eventify","createLayout","USE_FAKE","USE_INTERPOLATE","REMOVE_OVERLAPS","USE_REAL","createAggregateLayout","physicsLayout","createPhysicsLayout","fakeLayout","interpolateLayout","isGraphReady","layoutIterations","layoutTime","maxLayoutIterations","maxLayoutTime","api","pinNode","setGraphReady","getGraphReady","rect","start","performance","now","finished","max","syncLayouts","runOverlapsRemoval","forEachNode","node","getRectangles","setNodePosition","rects","inflatedRect","springLength","springCoeff","gravity","theta","dragCoeff","timeStep","nodeMass","links","getLinks","mul","svg","createLinkAnimator","edgeContainer","beingAnimated","scheduled","maxAnimations","scheduleLink","sort","getLinkScore","processor","requestAnimationFrame","processNext","getLinkInfo","cancelAnimationFrame","pop","speed","gaussian","animateLink","el","key","isDone","delete","linkId","fromNode","toNode","maxT","frame","dRatio","strokeWidth","color","linkInfo","pathData","ui","attr","fill","stroke","buildLinkIndex","maxDistance","pointIndex","points","createInternalIndex","findNearestLink","getPoints","neighborIds","pointId","point","distance","linkDistance","nextPoint","Flatbush","pointSize","finish","createRenderer","scene","querySelector","nodeContainer","hideTooltipArgs","isVisible","svgEl","pt","createSVGPoint","panzoom","createPanZoom","defaultRectangle","showRectangle","linkIndex","linkAnimator","currentLayoutFrame","textMeasure","on","onGraphReady","render","clearLastScene","off","onMouseMove","findLinkInfoFromEvent","showTooltip","clientX","clientY","hideTooltip","getNearestLink","svgP","matrixTransform","getScreenCTM","inverse","onSceneClick","info","minLink","removeHighlight","classList","querySelectorAll","removeHoverClass","remove","newGraph","drawLinks","onGraphStructureChanged","readyGraph","updatePositions","changes","change","changeType","addEventListener","radius","clear","removeEventListener","lastChild","uiAttributes","getNodeUIAttributes","rectAttributes","rx","ry","textAttributes","px","py","transform","mounted","closeHandler","keyCode","preventDefault","close","beforeUnmount","methods","$emit","__exports__","value","$props","onInput","_ctx","$event","autofocus","props","watch","modelValue","ensureSuffixPos","computed","patternReminder","patternPrefix","focus","$refs","input","suffix","prefix","innerText","textWidth","getBoundingClientRect","suffixBox","prefixBox","selfBox","$el","maxValue","suffixPos","style","visibility","paddingRight","paddingLeft","aboutVisible","tooltip","components","About","QueryInput","isLoading","forwardFocus","queryInput","renderer","blur","event","showDetails","open","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","keys","every","splice","n","getter","__esModule","definition","o","defineProperty","enumerable","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","call","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}